import {
  useSWR,
  useSWRConfig,
  useSWRInfinite,
  withMiddleware
} from "./chunk-47YHPHCA.js";
import {
  require_react
} from "./chunk-HUL2CLQT.js";
import {
  __toESM
} from "./chunk-EWTE5DHJ.js";

// node_modules/swr/dist/immutable/index.mjs
var immutable = (useSWRNext) => (key, fetcher, config) => {
  config.revalidateOnFocus = false;
  config.revalidateIfStale = false;
  config.revalidateOnReconnect = false;
  return useSWRNext(key, fetcher, config);
};
var useSWRImmutable = withMiddleware(useSWR, immutable);

// node_modules/swr-openapi/dist/index.mjs
var import_react = __toESM(require_react(), 1);
function configureBaseQueryHook(useHook) {
  return function createQueryBaseHook(client, prefix) {
    return function useQuery(path, ...[init, config]) {
      (0, import_react.useDebugValue)(`${prefix} - ${path}`);
      const key = (0, import_react.useMemo)(() => init !== null ? [prefix, path, init] : null, [prefix, path, init]);
      const fetcher = (0, import_react.useCallback)(
        async ([_, path2, init2]) => {
          const res = await client.GET(path2, init2);
          if (res.error) {
            throw res.error;
          }
          return res.data;
        },
        [client]
      );
      return useHook(key, fetcher, config);
    };
  };
}
var createImmutableHook = configureBaseQueryHook(useSWRImmutable);
function createInfiniteHook(client, prefix) {
  return function useInfinite(path, getInit, config) {
    (0, import_react.useDebugValue)(`${prefix} - ${path}`);
    const fetcher = (0, import_react.useCallback)(
      async ([_, path2, init]) => {
        const res = await client.GET(path2, init);
        if (res.error) {
          throw res.error;
        }
        return res.data;
      },
      [client]
    );
    const getKey = (index, previousPageData) => {
      const init = getInit(index, previousPageData);
      if (init === null) {
        return null;
      }
      const key = [prefix, path, init];
      return key;
    };
    return useSWRInfinite(getKey, fetcher, config);
  };
}
function createMutateHook(client, prefix, compare) {
  return function useMutate() {
    const { mutate: swrMutate } = useSWRConfig();
    (0, import_react.useDebugValue)(prefix);
    return (0, import_react.useCallback)(
      function mutate([path, init], data, opts) {
        return swrMutate(
          (key) => {
            if (
              // Must be array
              !Array.isArray(key) || // Must have 2 or 3 elements (prefix, path, optional init)
              ![2, 3].includes(key.length)
            ) {
              return false;
            }
            const [keyPrefix, keyPath, keyOptions] = key;
            return (
              // Matching prefix
              keyPrefix === prefix && // Matching path
              keyPath === path && // Matching options
              (init ? compare(keyOptions, init) : true)
            );
          },
          data,
          opts
        );
      },
      [swrMutate, prefix, compare]
    );
  };
}
var createQueryHook = configureBaseQueryHook(useSWR);
export {
  createImmutableHook,
  createInfiniteHook,
  createMutateHook,
  createQueryHook
};
//# sourceMappingURL=swr-openapi.js.map
